!function(){"use strict";function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,r){var i=t(e,n);if(i){var u=Object.getOwnPropertyDescriptor(i,n);return u.get?u.get.call(arguments.length<3?e:r):u.value}}).apply(this,arguments)}function t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunklasa_schedules=self.webpackChunklasa_schedules||[]).push([[7246],{5503:function(e,t,n){n.d(t,{D:function(){return s}});var r,i=n(8583),u=n(639),s=((r=a(function e(){h(this,e)})).\u0275fac=function(e){return new(e||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({imports:[[i.ez]]}),r)},6421:function(e,t,n){n.d(t,{F:function(){return c}});var r,i=n(2340),u=n(639),s=n(1841),o=n(6370),c=((r=function(){function e(t,n){h(this,e),this.http=t,this.state=n,this.SCHEDULES_API=i.N.schedulesAPI}return a(e,[{key:"getSchedules",value:function(){return this.http.get(this.SCHEDULES_API+"/schedule.json")}},{key:"getSchoolYear",value:function(){return this.http.get(this.SCHEDULES_API+"/school-year.json")}},{key:"determineSchedule",value:function(e,t,n){var r=this;e=this.stripTime(e);var i=!1,u={currentSchedule:null};if(e<new Date(t.not_before)||e>new Date(t.not_after))return u.scheduleReason="School not in session",e>new Date(t.not_after)?(u.statusCode=-1,u):(u.statusCode=0,u);if(t.holidays.forEach(function(t){r.dateApplies(e,t)&&(u.scheduleReason="School Holiday",i=!0)}),i)return u.statusCode=0,u;for(var s=function(t){if("dates"in n[t]&&n[t].dates.forEach(function(n){r.dateApplies(e,n)&&(u.currentSchedule=t,i=!0)}),i)return{v:(u.statusCode=3,u)}},o=0;o<n.length;o++){var c=s(o);if("object"==typeof c)return c.v}for(var a=0;a<n.length;a++)if("applyDay"in n[a]&&n[a].applyDay.includes(e.getDay()))return u.currentSchedule=a,u.statusCode=2,u;return 6==e.getDay()||0==e.getDay()?(u.currentSchedule=null,u.scheduleReason="Weekend",u.statusCode=0,u):(u.currentSchedule=0,u.statusCode=1,u)}},{key:"dateApplies",value:function(e,t){return t instanceof Array?e>=new Date(t[0])&&e<=new Date(t[1]):e.getTime()===new Date(t).getTime()}},{key:"stripTime",value:function(e){return(e=new Date(e.getTime())).setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}},{key:"subtractTime",value:function(e,t){var n=e.split(":"),r=t.split(":"),i=3600*Number(n[0])+60*Number(n[1])+Number(n[2])-(3600*Number(r[0])+60*Number(r[1])+Number(r[2])),u=[Math.floor(i/3600),Math.floor(i%3600/60),i%60],s=[];return u.forEach(function(e){var t=e.toString();s.push(t.length<2?"0"+t:t)}),s[0]+":"+s[1]+":"+s[2]}},{key:"addTime",value:function(e,t){var n=e.split(":"),r=t.split(":"),i=3600*Number(n[0])+60*Number(n[1])+Number(n[2])+(3600*Number(r[0])+60*Number(r[1])+Number(r[2])),u=[Math.floor(i/3600),Math.floor(i%3600/60),i%60],s=[];return u.forEach(function(e){var t=e.toString();s.push(t.length<2?"0"+t:t)}),s[0]+":"+s[1]+":"+s[2]}},{key:"periodCheck",value:function(e,t,n){var r=e.toLocaleTimeString([],{hour12:!1}),i=this.determineSchedule(e,t,n);if(this.state.setCurrentSchedule(n[i.currentSchedule]),null==i.currentSchedule)return{currentPeriod:i.scheduleReason};for(var u=n[i.currentSchedule].combinedAB||!1,s=0;s<n[i.currentSchedule].schedule.length;s++){var o=n[i.currentSchedule].schedule[s],c=(4===o.startTime.length?"0":"")+o.startTime+":00",a=(4===o.endTime.length?"0":"")+o.endTime+":00";if(r<c&&0==s)return{currentPeriod:"School not started.",timeRemaining:this.subtractTime(c,r)};var h=void 0,l=n[i.currentSchedule].schedule[s+1]?n[i.currentSchedule].schedule[s+1]:null,f=o.name;if(u&&-1!=f.indexOf("/")&&(1===e.getDay()||3===e.getDay()?f=o.name.substring(0,1):(2===e.getDay()||4===e.getDay())&&(f=o.name.substring(2))),null!=l&&(h=l.name,u&&-1!=h.indexOf("/")&&(1===e.getDay()||3===e.getDay()?h=l.name.substring(0,1):(2===e.getDay()||4===e.getDay())&&(h=l.name.substring(2)))),r<a&&r>=c)return{currentPeriod:f,periodEndTime:a,timeRemaining:this.subtractTime(a+":00",r)};if(null!=l&&r>=a&&r<l.startTime)return{currentPeriod:"Between "+f+" and "+h,timeRemaining:this.subtractTime(l.startTime+":00",r)};if(null==l&&r>=a)return{currentPeriod:"School is released."}}}}]),e}()).\u0275fac=function(e){return new(e||r)(u.LFG(s.eN),u.LFG(o.b))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},6370:function(t,r,u){u.d(r,{b:function(){return R}});var c,l=u(4762),f=u(9765),d=u(5319),v=function(e){n(r,e);var t=i(r);function r(e,n){var i;return h(this,r),(i=t.call(this,e,n)).scheduler=e,i.work=n,i.pending=!1,i}return a(r,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),r}(function(e){n(r,e);var t=i(r);function r(e,n){return h(this,r),t.call(this)}return a(r,[{key:"schedule",value:function(e){return this}}]),r}(d.w)),p=((c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;h(this,e),this.SchedulerAction=t,this.now=n}return a(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}()).now=function(){return Date.now()},c),y=new(function(e){n(r,e);var t=i(r);function r(){return h(this,r),t.apply(this,arguments)}return a(r)}(function(t){n(u,t);var r=i(u);function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.now;return h(this,u),(t=r.call(this,e,function(){return u.delegate&&u.delegate!==s(t)?u.delegate.now():n()})).actions=[],t.active=!1,t.scheduled=void 0,t}return a(u,[{key:"schedule",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return u.delegate&&u.delegate!==this?u.delegate.schedule(t,n,r):e(o(u.prototype),"schedule",this).call(this,t,n,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),u}(p)))(function(t){n(u,t);var r=i(u);function u(e,t){var n;return h(this,u),(n=r.call(this,e,t)).scheduler=e,n.work=t,n}return a(u,[{key:"schedule",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n>0?e(o(u.prototype),"schedule",this).call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,n){return n>0||this.closed?e(o(u.prototype),"execute",this).call(this,t,n):this._execute(t,n)}},{key:"requestAsyncId",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?e(o(u.prototype),"requestAsyncId",this).call(this,t,n,r):t.flush(this)}}]),u}(v)),g=u(7393),b=u(9193),m=u(5917),w=u(7574),k=function(){function e(t,n,r){h(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return a(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,m.of)(this.value);case"E":return e=this.error,new w.y(function(t){return t.error(e)});case"C":return(0,b.c)()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();k.completeNotification=new k("C"),k.undefinedValueNotification=new k("N",void 0);var E=function(e){n(r,e);var t=i(r);function r(e,n){var i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h(this,r),(i=t.call(this,e)).scheduler=n,i.delay=u,i}return a(r,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(r.dispatch,this.delay,new S(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(k.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(k.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(k.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),r}(g.L),S=a(function e(t,n){h(this,e),this.notification=t,this.destination=n}),_=u(7971),N=u(8858),x=function(t){n(u,t);var r=i(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,i=arguments.length>2?arguments[2]:void 0;return h(this,u),(e=r.call(this)).scheduler=i,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=t<1?1:t,e._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return a(u,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e(o(u.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new T(this._getNow(),t)),this._trimBufferThenGetEvents()),e(o(u.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,u=r.length;if(this.closed)throw new _.N;if(this.isStopped||this.hasError?t=d.w.EMPTY:(this.observers.push(e),t=new N.W(this,e)),i&&e.add(e=new E(e,i)),n)for(var s=0;s<u&&!e.closed;s++)e.next(r[s]);else for(var o=0;o<u&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||y).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,u=0;u<i&&!(e-r[u].time<n);)u++;return i>t&&(u=Math.max(u,i-t)),u>0&&r.splice(0,u),r}}]),u}(f.xQ),T=a(function e(t,n){h(this,e),this.time=t,this.value=n}),I=u(6215),P=u(639),C=u(1628),R=function(){var e=function(){function e(t){var n=this;h(this,e),this.db=t,this.PREFERENCES_KEY="app-preferences",this.preferences=new I.X({twentyfour:!1,bells:!1}),this.currentSchedule=new x(1),this.initStorage(),t.get(this.PREFERENCES_KEY).then(function(e){e?n.preferences.next(e):t.set(n.PREFERENCES_KEY,n.preferences.getValue())})}return a(e,[{key:"initStorage",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.create();case 2:case"end":return e.stop()}},e,this)}))}},{key:"getPreferences",value:function(){return this.preferences.asObservable()}},{key:"setPreferences",value:function(e){var t=this;this.db.set(this.PREFERENCES_KEY,this.preferences).then(function(){return t.preferences.next(e)})}},{key:"setPreference",value:function(e,t){var n=this,r=this.preferences.getValue();r[e]=t,this.db.set(this.PREFERENCES_KEY,r).then(function(){return n.preferences.next(r)})}},{key:"getCurrentSchedule",value:function(){return this.currentSchedule.asObservable()}},{key:"setCurrentSchedule",value:function(e){this.currentSchedule.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.LFG(C.K))},e.\u0275prov=P.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},9775:function(e,t,n){n.d(t,{x:function(){return u}});var r,i=n(639),u=((r=function(){function e(){h(this,e)}return a(e,[{key:"transform",value:function(e,t){var n="";if(!t&&e){var r=e.indexOf(":"),i=Number(e.substring(0,r));return n+=String(i>12?i-12:i),n+=e.substring(r),n+=i>=12?"p":"a"}return e}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275pipe=i.Yjl({name:"timeFormat",type:r,pure:!0}),r)}}])}();