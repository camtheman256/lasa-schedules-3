!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(self.webpackChunklasa_schedules=self.webpackChunklasa_schedules||[]).push([[8023],{8023:function(t,o,i){"use strict";i.r(o),i.d(o,{CurrentSchedulePageModule:function(){return S}});var r=i(8583),a=i(665),s=i(7823),c=i(1383),u=i(4762),l=i(639),Z=function(){var t=function(){function t(n){e(this,t),this.me=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"dismissModal",value:function(){this.me.dismiss()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.IN))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-about"]],decls:63,vars:1,consts:[["slot","end"],[3,"click"],["name","close"],[3,"fullscreen"],["collapse","condense"],["size","large"],["src","assets/lasa-banner.png"],["color","lasa",2,"vertical-align","middle"],["href","mailto:cameron@lasa2019.com?subject=LASA%20Schedules%20App%20Feedback"],["href","https://schedules-editor.lasa2019.com","target","_blank"],["href","https://github.com/camtheman256/lasa-schedules-3","target","_blank"],["name","logo-github","slot","start"],["href","https://github.com/camtheman256/lasa-schedules-data","target","_blank"],["href","https://github.com/camtheman256/lasa-schedules-editor","target","_blank"],["href","https://camk.co","target","_blank"],["name","person","slot","start"],["href","https://lasa2019.com","target","_blank"],["name","school","slot","start"],[2,"margin-top","1rem"],["href","https://creativecommons.org/licenses/by/4.0/legalcode","target","_blank"],["href","https://notificationsounds.com/wake-up-tones/solemn-522"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-title"),l._uU(3,"About LASA Schedules"),l.qZA(),l.TgZ(4,"ion-buttons",0),l.TgZ(5,"ion-button",1),l.NdJ("click",function(){return t.dismissModal()}),l._UZ(6,"ion-icon",2),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"ion-content",3),l.TgZ(8,"ion-header",4),l.TgZ(9,"ion-toolbar"),l.TgZ(10,"ion-title",5),l._uU(11,"About"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"ion-card"),l._UZ(13,"img",6),l.TgZ(14,"ion-card-header"),l.TgZ(15,"ion-card-title"),l._uU(16,"LASA Schedules "),l.TgZ(17,"ion-badge",7),l._uU(18,"v3"),l.qZA(),l.qZA(),l.TgZ(19,"ion-card-subtitle"),l._uU(20,"by Cameron Kleiman for LASA 2019"),l.qZA(),l.qZA(),l.TgZ(21,"ion-card-content"),l.TgZ(22,"p"),l._uU(23,"If you have feedback, please email "),l.TgZ(24,"a",8),l._uU(25,"cameron@lasa2019.com"),l.qZA(),l._uU(26,"."),l.qZA(),l.TgZ(27,"p"),l._uU(28,"You can edit the schedules powering this app! Visit "),l.TgZ(29,"a",9),l._uU(30,"LASA Schedules Editor"),l.qZA(),l._uU(31," to get started."),l.qZA(),l.TgZ(32,"ion-list"),l.TgZ(33,"ion-list-header"),l._uU(34,"Links"),l.qZA(),l.TgZ(35,"ion-item",10),l.TgZ(36,"ion-label"),l._uU(37,"LASA Schedules 3"),l.qZA(),l._UZ(38,"ion-icon",11),l.qZA(),l.TgZ(39,"ion-item",12),l.TgZ(40,"ion-label"),l._uU(41,"LASA Schedules Data API"),l.qZA(),l._UZ(42,"ion-icon",11),l.qZA(),l.TgZ(43,"ion-item",13),l.TgZ(44,"ion-label"),l._uU(45,"LASA Schedules Editor"),l.qZA(),l._UZ(46,"ion-icon",11),l.qZA(),l.TgZ(47,"ion-item",14),l.TgZ(48,"ion-label"),l._uU(49,"Cameron Kleiman"),l.qZA(),l._UZ(50,"ion-icon",15),l.qZA(),l.TgZ(51,"ion-item",16),l.TgZ(52,"ion-label"),l._uU(53,"LASA 2019"),l.qZA(),l._UZ(54,"ion-icon",17),l.qZA(),l.qZA(),l.TgZ(55,"p",18),l._uU(56," The bell sound used, unaltered, is copyright notificationsounds.com and licensed under "),l.TgZ(57,"a",19),l._uU(58,"CC BY 4.0"),l.qZA(),l._uU(59,". It can be found at "),l.TgZ(60,"a",20),l._uU(61,"this link"),l.qZA(),l._uU(62,". "),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.Q6J("fullscreen",!0))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YG,s.gu,s.W2,s.PM,s.Zi,s.gZ,s.yp,s.tO,s.FN,s.q_,s.yh,s.Ie,s.Q$],styles:[""]}),t}(),g=i(6421),d=i(6370),h=i(9775);function f(e,t){if(1&e&&(l.TgZ(0,"h2"),l._uU(1),l.ALo(2,"timeFormat"),l.qZA()),2&e){var n=l.oxw(2);l.xp6(1),l.hij(" Ends at ",l.xi3(2,1,n.currentStatus.periodEndTime,!!n.preferences&&n.preferences.twentyfour)," ")}}function m(e,t){if(1&e&&(l.TgZ(0,"p"),l._uU(1),l.qZA()),2&e){var n=l.oxw(2);l.xp6(1),l.hij(" Time remaining: ",n.currentStatus.timeRemaining," ")}}function p(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"ion-card-header"),l.TgZ(2,"ion-card-subtitle"),l._uU(3,"Current Period"),l.qZA(),l.TgZ(4,"ion-card-title"),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"ion-card-content"),l.YNc(7,f,3,4,"h2",14),l.YNc(8,m,2,1,"p",14),l.qZA(),l.qZA()),2&e){var n=l.oxw();l.xp6(5),l.Oqu(n.currentStatus.currentPeriod),l.xp6(2),l.Q6J("ngIf",n.currentStatus.periodEndTime),l.xp6(1),l.Q6J("ngIf",n.currentStatus.timeRemaining)}}function A(e,t){1&e&&(l.TgZ(0,"ion-card-content"),l.TgZ(1,"ion-card-title"),l._uU(2,"Loading..."),l.qZA(),l.qZA())}var b,T,q=[{path:"",component:(b=function(){function t(n,o,i){e(this,t),this.sched=n,this.state=o,this.modal=i,this.bells=!1,this.bell_sound=new Audio("assets/solemn.mp3")}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.sched.getSchedules().subscribe(function(t){return e.schedules=t}),this.sched.getSchoolYear().subscribe(function(t){return e.schoolYear=t}),this.state.getPreferences().subscribe(function(t){e.preferences=t,e.bells=t.bells}),this.state.getCurrentSchedule().subscribe(function(t){return e.currentSchedule=t}),setInterval(function(){var t=new Date;if(e.currentTime=t.toLocaleTimeString([],{hour12:!1}),e.currentDate=t.toLocaleDateString([],{weekday:"long",month:"long",day:"numeric",year:"numeric"}),e.schedules&&e.schoolYear){var n=e.sched.periodCheck(t,e.schoolYear,e.schedules);e.currentStatus&&e.bells&&n.currentPeriod!==e.currentStatus.currentPeriod&&e.bell_sound.play(),e.currentStatus=n}},500)}},{key:"toggleTimeFormat",value:function(e){this.preferences&&this.state.setPreference("twentyfour",!this.preferences.twentyfour)}},{key:"toggleBells",value:function(e){this.preferences&&this.state.setPreference("bells",this.bells)}},{key:"presentAboutPage",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modal.create({component:Z});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"playBell",value:function(e){this.bell_sound.play()}}]),t}(),b.\u0275fac=function(e){return new(e||b)(l.Y36(g.F),l.Y36(d.b),l.Y36(s.IN))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-current-schedule"]],decls:40,vars:10,consts:[["color","lasa"],["slot","end"],[3,"click"],["slot","icon-only","name","information-circle"],[4,"ngIf","ngIfElse"],["loading",""],["lines","none"],["text-wrap",""],["slot","start","color","lasa",3,"ngModel","ngModelChange"],[3,"hidden"],["slot","start","fill","clear","color","lasa","size","default",3,"click"],["name","play"],["name","share-outline","slot","start"],["name","cog-outline","slot","start"],[4,"ngIf"]],template:function(e,t){if(1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-title"),l._uU(3),l.qZA(),l.TgZ(4,"ion-buttons",1),l.TgZ(5,"ion-button",2),l.NdJ("click",function(){return t.presentAboutPage()}),l._UZ(6,"ion-icon",3),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"ion-content"),l.TgZ(8,"ion-card",2),l.NdJ("click",function(e){return t.toggleTimeFormat(e)}),l.TgZ(9,"ion-card-header"),l.TgZ(10,"ion-card-subtitle"),l._uU(11,"Current Time"),l.qZA(),l.TgZ(12,"ion-card-title"),l._uU(13),l.ALo(14,"timeFormat"),l.qZA(),l.TgZ(15,"div"),l._uU(16),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"ion-card",0),l.YNc(18,p,9,3,"div",4),l.YNc(19,A,3,0,"ng-template",null,5,l.W1O),l.qZA(),l.TgZ(21,"ion-card-content"),l.TgZ(22,"ion-list",6),l.TgZ(23,"ion-item"),l.TgZ(24,"ion-label",7),l._uU(25,"Use virtual bells (requires app open)"),l.qZA(),l.TgZ(26,"ion-toggle",8),l.NdJ("ngModelChange",function(e){return t.bells=e})("ngModelChange",function(e){return t.toggleBells(e)}),l.qZA(),l.qZA(),l.TgZ(27,"ion-item",9),l.TgZ(28,"ion-label",7),l._uU(29,"If bells aren't working, press the play button once to start."),l.qZA(),l.TgZ(30,"ion-button",10),l.NdJ("click",function(e){return t.playBell(e)}),l._UZ(31,"ion-icon",11),l.qZA(),l.qZA(),l.TgZ(32,"ion-item"),l.TgZ(33,"ion-label",7),l._uU(34,"Install this app by adding it to your home screen."),l.qZA(),l._UZ(35,"ion-icon",12),l.qZA(),l.TgZ(36,"ion-item"),l.TgZ(37,"ion-label",7),l._uU(38,"Tap the time to change between 12-hour and 24-hour time."),l.qZA(),l._UZ(39,"ion-icon",13),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var n=l.MAs(20);l.xp6(3),l.Oqu(t.currentSchedule?t.currentSchedule.name+" Schedule":"Current Schedule"),l.xp6(10),l.Oqu(l.xi3(14,7,t.currentTime,!!t.preferences&&t.preferences.twentyfour)),l.xp6(3),l.Oqu(t.currentDate),l.xp6(2),l.Q6J("ngIf",t.currentStatus)("ngIfElse",n),l.xp6(8),l.Q6J("ngModel",t.bells),l.xp6(1),l.Q6J("hidden",!t.bells)}},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YG,s.gu,s.W2,s.PM,s.Zi,s.tO,s.gZ,r.O5,s.FN,s.q_,s.Ie,s.Q$,s.ho,s.w,a.JJ,a.On],pipes:[h.x],styles:[".fix-element-width[_ngcontent-%COMP%]{width:50px}"]}),b)}],_=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[c.Bz.forChild(q)],c.Bz]}),t}(),U=i(5503),S=((T=function t(){e(this,t)}).\u0275fac=function(e){return new(e||T)},T.\u0275mod=l.oAB({type:T}),T.\u0275inj=l.cJS({imports:[[r.ez,a.u5,s.Pc,_,U.D]]}),T)}}])}();